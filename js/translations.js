window.translations = {
    en: {
        title: '๐ Sunset Clock',
        clockLabel: 'Time since sunset',
        countryLabel: 'Country:',
        cityLabel: 'City:',
        saveBtn: 'Save Location',
        locationText: 'Loading location...',
        pleaseEnterLocation: 'Please enter your location',
        searchCountry: 'Search country...',
        selectCountryFirst: 'Select country first...',
        searchCity: 'Search city...',
        loadingCities: 'Loading cities...',
        noCountriesFound: 'No countries found',
        noCitiesFound: 'No cities found',
        pleaseSelectBoth: 'Please select both country and city',
        pleaseSelectValidCountry: 'Please select a valid country from the list',
        locationNotSet: 'Location not set',
        fetchingSunset: 'Fetching sunset time...',
        usingCached: 'Using cached sunset time',
        sunsetUpdated: 'Sunset time updated',
        errorFetching: 'Error fetching sunset time. Using cached data if available.',
        usingCachedOutdated: 'Using cached sunset time (may be outdated)',
        unableToLoad: 'Unable to load sunset time',
        offline: 'Offline - using cached sunset time',
        estimatedOffline: 'Estimated sunset time (offline)',
        settings: 'โ๏ธ',
        aboutTitle: 'About Sunset Clock',
        aboutText: '<p>Sunset Clock is a unique time display that shows time elapsed since the last sunset. The clock resets every day at sunset, creating a natural 24-hour cycle.</p><p>The background gradient changes throughout the day to reflect the time of day, transitioning from deep night blues to morning purples and afternoon oranges.</p><p>You can set your location to get accurate sunset times for your area. The app works offline using cached sunset times when internet is unavailable.</p>',
        aboutTextSummary: '<p>100-word summary coming soon</p>',
        aboutTextDetails: '<p>500-word details coming soon</p>'
    },
    fa: {
        title: '๐ ุณุงุนุช ุบุฑูุจ ฺฉูฺฉ',
        clockLabel: 'ุฒูุงู ุงุฒ ุบุฑูุจ',
        countryLabel: 'ฺฉุดูุฑ:',
        cityLabel: 'ุดูุฑ:',
        saveBtn: 'ุฐุฎุฑู ูููุนุช',
        locationText: 'ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ูููุนุช...',
        pleaseEnterLocation: 'ูุทูุงู ูููุนุช ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ',
        searchCountry: 'ุฌุณุชุฌู ฺฉุดูุฑ...',
        selectCountryFirst: 'ุงุจุชุฏุง ฺฉุดูุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ...',
        searchCity: 'ุฌุณุชุฌู ุดูุฑ...',
        loadingCities: 'ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ุดูุฑูุง...',
        noCountriesFound: 'ฺฉุดูุฑ ุงูุช ูุดุฏ',
        noCitiesFound: 'ุดูุฑ ุงูุช ูุดุฏ',
        pleaseSelectBoth: 'ูุทูุงู ฺฉุดูุฑ ู ุดูุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ',
        pleaseSelectValidCountry: 'ูุทูุงู ฺฉ ฺฉุดูุฑ ูุนุชุจุฑ ุงุฒ ูุณุช ุงูุชุฎุงุจ ฺฉูุฏ',
        locationNotSet: 'ูููุนุช ุชูุธู ูุดุฏู',
        fetchingSunset: 'ุฏุฑ ุญุงู ุฏุฑุงูุช ุฒูุงู ุบุฑูุจ...',
        usingCached: 'ุงุณุชูุงุฏู ุงุฒ ุฒูุงู ุบุฑูุจ ุฐุฎุฑู ุดุฏู',
        sunsetUpdated: 'ุฒูุงู ุบุฑูุจ ุจูโุฑูุฒุฑุณุงู ุดุฏ',
        errorFetching: 'ุฎุทุง ุฏุฑ ุฏุฑุงูุช ุฒูุงู ุบุฑูุจ. ุฏุฑ ุตูุฑุช ูุฌูุฏุ ุงุฒ ุฏุงุฏูโูุง ุฐุฎุฑู ุดุฏู ุงุณุชูุงุฏู ูโุดูุฏ.',
        usingCachedOutdated: 'ุงุณุชูุงุฏู ุงุฒ ุฒูุงู ุบุฑูุจ ุฐุฎุฑู ุดุฏู (ููฺฉู ุงุณุช ูุฏู ุจุงุดุฏ)',
        unableToLoad: 'ุงูฺฉุงู ุจุงุฑฺฏุฐุงุฑ ุฒูุงู ุบุฑูุจ ูุฌูุฏ ูุฏุงุฑุฏ',
        offline: 'ุขููุงู - ุงุณุชูุงุฏู ุงุฒ ุฒูุงู ุบุฑูุจ ุฐุฎุฑู ุดุฏู',
        estimatedOffline: 'ุฒูุงู ุบุฑูุจ ุชุฎูู (ุขููุงู)',
        settings: 'โ๏ธ',
        aboutTitle: 'ุฏุฑุจุงุฑู ุณุงุนุช ุบุฑูุจ',
        aboutText: '<p>ุณุงุนุช ุบุฑูุจ ฺฉ ููุงุด ุฒูุงู ููุญุตุฑ ุจู ูุฑุฏ ุงุณุช ฺฉู ุฒูุงู ุณูพุฑ ุดุฏู ุงุฒ ุขุฎุฑู ุบุฑูุจ ุฑุง ูุดุงู ูโุฏูุฏ. ุณุงุนุช ูุฑ ุฑูุฒ ุฏุฑ ุฒูุงู ุบุฑูุจ ุจุงุฒูุดุงู ูโุดูุฏ ู ฺฉ ฺุฑุฎู ุทุจุน 24 ุณุงุนุชู ุงุฌุงุฏ ูโฺฉูุฏ.</p><p>ฺฏุฑุงุฏุงู ูพุณโุฒููู ุฏุฑ ุทูู ุฑูุฒ ุชุบุฑ ูโฺฉูุฏ ุชุง ุฒูุงู ุฑูุฒ ุฑุง ููุนฺฉุณ ฺฉูุฏ ู ุงุฒ ุขุจโูุง ุนูู ุดุจ ุจู ุจููุดโูุง ุตุจุญฺฏุงู ู ูุงุฑูุฌโูุง ุจุนุฏุงุฒุธูุฑ ุชุจุฏู ูโุดูุฏ.</p><p>ูโุชูุงูุฏ ูููุนุช ุฎูุฏ ุฑุง ุชูุธู ฺฉูุฏ ุชุง ุฒูุงูโูุง ุฏูู ุบุฑูุจ ุจุฑุง ููุทูู ุฎูุฏ ุฑุง ุฏุฑุงูุช ฺฉูุฏ. ุงู ุจุฑูุงูู ุจู ุตูุฑุช ุขููุงู ฺฉุงุฑ ูโฺฉูุฏ ู ุงุฒ ุฒูุงูโูุง ุบุฑูุจ ุฐุฎุฑู ุดุฏู ุงุณุชูุงุฏู ูโฺฉูุฏ.</p>',
        aboutTextSummary: '<p><strong>ุฎูุงุตู ฑฐฐ ฺฉูููโุง:</strong></p><p>ุณุงุนุช ุบุฑูุจโฺฉูฺฉ ุจู ูุนูุง ุชูุธู ุขุบุงุฒ ุฑูุฒุดูุงุฑ ุงุฒ ุฒูุงู ุบุฑูุจ ุขูุชุงุจ (ุณุงุนุช ฑฒ ุดุจ) ุงุณุช. ุงู ุณุณุชู ุจุฑ ุงุณุงุณ ุขููุฒูโูุง ุงุณูุงู ู ููุงููฺฏ ุจุง ูุทุฑุช ุงูุณุงู ุทุฑุงุญ ุดุฏู ุงุณุช. ูููโุชุฑู ูุงุฏู ุขูุ ุงุฌุงุฏ ุชูุณูโุจูุฏ ุทุจุน ู ููุฏ ุฒูุงู ุงุณุช: ุดุจ (ุงุฒ ุบุฑูุจ) ุจูโุนููุงู ุฒูุงู ูุดุฎุต ุงุณุชุฑุงุญุชุ ุนุจุงุฏุช ู ุฎูุงุจ ุดูุฑุฏู ูโุดูุฏ ู ุฑูุฒ (ุงุฒ ุทููุน ุขูุชุงุจ) ุจูโุนููุงู ุฒูุงู ูุนุงูุช ู ฺฉุงุฑ. ุงู ุฑูุด ุจู ูุฑุฏ ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจูโุฑุงุญุช ููุฏุงุฑ ุจุงูโูุงูุฏู ุงุฒ ุฑูุฒ ุจุฑุง ุงูุฌุงู ฺฉุงุฑูุง ู ููุฏุงุฑ ฺฏุฐุดุชู ุงุฒ ุดุจ ุจุฑุง ุงุณุชุฑุงุญุช ฺฉุงู ุฑุง ูุญุงุณุจู ฺฉูุฏ ู ุจุฑูุงููโุฑุฒ ุจูููโุง ุฏุงุดุชู ุจุงุดุฏ.</p>',
        aboutTextDetails: '<p><strong>ุฎูุงุตู ตฐฐ ฺฉูููโุง ู ููุงุฏ:</strong></p><p>ุณุงุนุช ุบุฑูุจโฺฉูฺฉ ุณุณุชู ุจุฑุง ุงูุฏุงุฒูโฺฏุฑ ุฒูุงู ุงุณุช ฺฉู ุฏุฑ ุขูุ ุขุบุงุฒ ุฑูุฒ ุฌุฏุฏ ุจุง ุฒูุงู ุบุฑูุจ ุฎูุฑุดุฏ (ฺฉู ุณุงุนุช ฑฒ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูโุดูุฏ) ููุงููฺฏ ูโฺฏุฑุฏุฏ. ูุนูุง ุงู ุณุณุชูุ ููุณู ฺฉุฑุฏู ุจุฑูุงููโุฑุฒ ุฒูุงู ุฒูุฏฺฏ ุงูุณุงู ุจุง ฺุฑุฎู ุทุจุน ุดุจุงููโุฑูุฒ ู ุงุญฺฉุงู ุงุณูุงู ูุจุชู ุจุฑ ูุทุฑุช ุงุณุช. ุฏุฑ ุงู ูฺฏุงูุ ุดุจ ู ุฑูุฒ ูุฑ ฺฉุฏุงู ุฏุงุฑุง ููุช ู ฺฉุงุฑฺฉุฑุฏ ุฌุฏุงฺฏุงููโุง ูุณุชูุฏ: ุดุจุ ุฒูุงู ุชุงุฑฺฉุ ูุฎููู ุจุฑุง ุณฺฉููุ ุขุฑุงูุดุ ุงุณุชุฑุงุญุชุ ุฎูุงุจ ู ุนุจุงุฏุช ุงุณุช ู ุฑูุฒุ ุฒูุงู ุฑูุดูุงุ ูุฎููู ุจุฑุง ุจุฏุงุฑุ ูุนุงูุชุ ุญุฑฺฉุช ู ุชูุงุด ุจุฑุง ูุนุงุด.</p><p><strong>ฑ. ุชูุธู ุฒุณุช ู ุจูุฏุงุดุช:</strong> ุงู ุณุณุชู ุงูุณุงู ุฑุง ุชุดูู ูโฺฉูุฏ ุชุง ุฏุฑ ุดุจ ฺฉู ุฒูุงู ููุงุณุจ ุจุฑุง ุงุณุชุฑุงุญุช ุงุณุชุ ุจุฎูุงุจุฏ ู ุฏุฑ ุฑูุฒ ฺฉู ุจุฑุง ูุนุงูุช ููุงุณุจโุชุฑ ุงุณุชุ ุจุฏุงุฑ ู ูุนุงู ุจุงุดุฏ. ุงู ุงูุฑ ุจุง ุชูุตูโูุง ูพุฒุดฺฉ ุฏุงุฑ ุจุฑ ูุถุฑูุงุช ุจุฏุงุฑ ุฏุฑ ุดุจ ู ุฎูุงุจ ุฒุงุฏ ุฏุฑ ุฑูุฒ ููุณู ุงุณุช ู ุณูุงูุช ุฌุณู ู ุฑูุงู ุฑุง ุชููุช ูโฺฉูุฏ.</p><p><strong>ฒ. ุดูุงูุช ู ุจุฑูุงููโุฑุฒ ุขุณุงู:</strong> ุฏุฑ ุงู ุณุณุชูุ ุจุง ูฺฏุงู ฺฉุฑุฏู ุจู ุณุงุนุชุ ูุฑุฏ ุจูโูุถูุญ ูโูููุฏ ฺูุฏุฑ ุงุฒ <strong>ุดุจ ฺฏุฐุดุชู</strong> (ูุซูุงู ุณุงุนุช ณ ุจู ูุนูุง ุณู ุณุงุนุช ุงุฒ ุขุบุงุฒ ุดุจ ฺฏุฐุดุชู) ู ุจูุงุจุฑุงู ูุฒุงู ุงุณุชุฑุงุญุช ุฎูุฏ ุฑุง ุงุฑุฒุงุจ ูโฺฉูุฏ. ุงุฒ ุทุฑูุ ุงุฒ ุขูุฌุง ฺฉู ูพุงุงู ุฑูุฒ ุฏุฑ ุณุงุนุช ฑฒ (ุบุฑูุจ ุจุนุฏ) ุซุงุจุช ุงุณุชุ ูโุชูุงูุฏ ูุญุงุณุจู ฺฉูุฏ ฺูุฏุฑ ุงุฒ <strong>ุฑูุฒ ุจุงู ูุงูุฏู</strong> (ูุซูุงู ุงฺฏุฑ ุณุงุนุช น ุจุงุดุฏุ ุณู ุณุงุนุช ุชุง ูพุงุงู ุฑูุฒ ุจุงู ุงุณุช) ู ุจูโุทูุฑ ูุคุซุฑ ูุธุงู ุฑูุฒุงูู ุฎูุฏ ุฑุง ุงูููุชโุจูุฏ ู ูุฏุฑุช ููุงุฏ.</p><p><strong>ณ. ููุงููฺฏ ุจุง ุงุญฺฉุงู ุดุฑุน ู ุนุฑู:</strong> ุจุณุงุฑ ุงุฒ ุฒูุงูโูุง ุนุจุงุฏ (ูุงููุฏ ููุงุฒ ูุบุฑุจ ู ุนุดุงุก ุฏุฑ ุขุบุงุฒ ุดุจุ ููุงุฒ ุตุจุญ ุฏุฑ ูพุงุงู ุดุจุ ู ููุงุฒ ุธูุฑ ู ุนุตุฑ ุฏุฑ ุฑูุฒ) ู ูุฒ ุจุฑูุงููโูุง ุฑูุฒูุฑู (ูุงููุฏ ฺฉุงุฑุ ฺฉุดุงูุฑุฒุ ูุนุงุดุฑุช) ุจู ุทูุฑ ุทุจุน ุฏุฑ ฺุงุฑฺูุจ ุงู ุชูุณูโุจูุฏ ูุนูุง ูโุงุจูุฏ ู ุงุฒ ุณุฑุฏุฑฺฏู ุฌููฺฏุฑ ูโุดูุฏ.</p><p><strong>ด. ุจูููโุณุงุฒ ุฒูุงู ฺฉุงุฑ ู ูุนุงูุช:</strong> ุจุง ุดุฑูุน ูุนุงูุชโูุง ุฑูุฒุงูู ุงุฒ ุทููุน ุขูุชุงุจ (ฺฉู ุฏุฑ ุงู ุณุณุชู ุณุงุนุช ูุชุบุฑ ุงูุง ูุงุจู ูุญุงุณุจู ูพุณ ุงุฒ ฺฏุฐุดุช ฺูุฏ ุณุงุนุช ุงุฒ ุขุบุงุฒ ุดุจ ุงุณุช)ุ ุงูุฑุงุฏ ูโุชูุงููุฏ ุฏุฑ ุณุงุนุชโูุง ุฎูฺฉ ู ููุงุณุจ ุฑูุฒ ฺฉุงุฑ ฺฉููุฏ ู ุฏุฑ ุงูุฌ ฺฏุฑูุง ุธูุฑ (ุญุฏูุฏ ููุช ุถุญ) ุงุณุชุฑุงุญุช ููุงูุฏ. ุงู ุงูุฑ ุจุงุฒุฏู ุฑุง ุงูุฒุงุด ู ุฎุณุชฺฏ ุฑุง ฺฉุงูุด ูโุฏูุฏ.</p><p><strong>ต. ูพุฑูุฒ ุงุฒ ูุดฺฉูุงุช ุณุณุชู ุธูุฑฺฉูฺฉ (ูููโุดุจโูุญูุฑ):</strong> ุฏุฑ ุณุณุชู ุฑุงุฌ ูุนู ฺฉู ูููโุดุจ ุฑุง ูุจุฏุฃ ูโฺฏุฑุฏุ ุดุจ ุจู ุฏู ููู ุชูุณู ู ููุช ุทุจุน ุฎูุฏ ุฑุง ุงุฒ ุฏุณุช ูโุฏูุฏ. ุงู ุงูุฑ ููุฌุฑ ุจู ุณุฑุฏุฑฺฏู ุฏุฑ ุจุฑูุงููโุฑุฒุ ุชุฏุงุฎู ุฒูุงู ุงุณุชุฑุงุญุช ู ฺฉุงุฑุ ู ุชูุธู ูุงููุงุณุจ ุณุงุนุงุช ฺฉุงุฑ ุงุฏุงุฑ ู ูุฏุงุฑุณ ูโุดูุฏุ ุจูโุทูุฑโฺฉู ููฺฉู ุงุณุช ุฏุฑ ูุตูู ูุฎุชููุ ุณุงุนุช ุดุฑูุน ฺฉุงุฑ ุจุง ุดุฑุงุท ุทุจุน ุฑูุฒ (ูุซูุงู ูุฒุงู ุฑูุดูุง ู ฺฏุฑูุง) ููุฎูุงู ูุฏุงุดุชู ุจุงุดุฏ ู ุจู ุณูุงูุช ู ุจูุฑูโูุฑ ุขุณุจ ุจุฒูุฏ.</p><p>ุฏุฑ ูุฌููุนุ ุณุงุนุช ุบุฑูุจโฺฉูฺฉ ุจุง ูุฏู ุงุณุชูุงุฏู ุจููู ู ยซุณุฑุดุงุฑยป ุงุฒ ุนูุฑุ ููุงููฺฏ ุจุง ุฑุชู ูุทุฑ ุจุฏู ู ุทุจุนุชุ ู ุงุฌุฑุง ููุธู ุจุฑูุงููโูุง ูุฑุฏ ู ุงุฌุชูุงุน ูุจุชู ุจุฑ ุงุณูุงู ุงุฑุงุฆู ุดุฏู ุงุณุช.</p>'
    }
};

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('sunsetClockLanguage', lang);
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'fa' ? 'rtl' : 'ltr';
    
    const t = window.translations[lang];
    
    // Update all translatable elements
    const elements = {
        'title': t.title,
        'clockLabel': t.clockLabel,
        'countryLabel': t.countryLabel,
        'cityLabel': t.cityLabel,
        'saveBtn': t.saveBtn,
        'languageToggleText': lang === 'en' ? 'ูุง' : 'en',
        'aboutTitle': t.aboutTitle,
        'aboutText': t.aboutText,
        'aboutTextSummary': t.aboutTextSummary,
        'aboutTextDetails': t.aboutTextDetails
    };
    
    for (const [id, text] of Object.entries(elements)) {
        const element = document.getElementById(id);
        if (element) {
            if (id.includes('aboutText')) {
                element.innerHTML = text;
            } else {
                element.textContent = text;
            }
        }
    }
    
    // Update tab labels for Persian
    if (lang === 'fa') {
        const tabTech = document.getElementById('tabTech');
        const tabSummary = document.getElementById('tabSummary');
        const tabDetails = document.getElementById('tabDetails');
        if (tabTech) tabTech.textContent = 'ููุงูุฑ';
        if (tabSummary) tabSummary.textContent = 'ุฎูุงุตู';
        if (tabDetails) tabDetails.textContent = 'ุชูุถุญุงุช';
    } else {
        const tabTech = document.getElementById('tabTech');
        const tabSummary = document.getElementById('tabSummary');
        const tabDetails = document.getElementById('tabDetails');
        if (tabTech) tabTech.textContent = 'Tech';
        if (tabSummary) tabSummary.textContent = 'Summary';
        if (tabDetails) tabDetails.textContent = 'Details';
    }
    
    // Update placeholders
    const countryInput = document.getElementById('country');
    const cityInput = document.getElementById('city');
    if (countryInput) countryInput.placeholder = t.searchCountry;
    if (cityInput) {
        cityInput.placeholder = window.selectedCountry ? t.searchCity : t.selectCountryFirst;
    }
    
    // Update location info if it exists
    if (typeof window.updateLocationInfo === 'function') {
        window.updateLocationInfo();
    }
}

function toggleLanguage() {
    const newLang = currentLang === 'en' ? 'fa' : 'en';
    setLanguage(newLang);
}

// Make functions available globally
window.setLanguage = setLanguage;
window.toggleLanguage = toggleLanguage;
window.currentLang = currentLang;