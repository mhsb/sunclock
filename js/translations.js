window.translations = {
    en: {
        title: 'ğŸŒ… Sunset Clock',
        clockLabel: 'Time since sunset',
        countryLabel: 'Country:',
        cityLabel: 'City:',
        saveBtn: 'Save Location',
        locationText: 'Loading location...',
        pleaseEnterLocation: 'Please enter your location',
        searchCountry: 'Search country...',
        selectCountryFirst: 'Select country first...',
        searchCity: 'Search city...',
        loadingCities: 'Loading cities...',
        noCountriesFound: 'No countries found',
        noCitiesFound: 'No cities found',
        pleaseSelectBoth: 'Please select both country and city',
        pleaseSelectValidCountry: 'Please select a valid country from the list',
        locationNotSet: 'Location not set',
        fetchingSunset: 'Fetching sunset time...',
        usingCached: 'Using cached sunset time',
        sunsetUpdated: 'Sunset time updated',
        errorFetching: 'Error fetching sunset time. Using cached data if available.',
        usingCachedOutdated: 'Using cached sunset time (may be outdated)',
        unableToLoad: 'Unable to load sunset time',
        offline: 'Offline - using cached sunset time',
        estimatedOffline: 'Estimated sunset time (offline)',
        settings: 'âš™ï¸',
        aboutTitle: 'About Sunset Clock',
        aboutText: '<p>Sunset Clock is a unique time display that shows time elapsed since the last sunset. The clock resets every day at sunset, creating a natural 24-hour cycle.</p><p>The background gradient changes throughout the day to reflect the time of day, transitioning from deep night blues to morning purples and afternoon oranges.</p><p>You can set your location to get accurate sunset times for your area. The app works offline using cached sunset times when internet is unavailable.</p>'
    },
    fa: {
        title: 'ğŸŒ… Ø³Ø§Ø¹Øª ØºØ±ÙˆØ¨ Ú©ÙˆÚ©',
        clockLabel: 'Ø²Ù…Ø§Ù† Ø§Ø² ØºØ±ÙˆØ¨',
        countryLabel: 'Ú©Ø´ÙˆØ±:',
        cityLabel: 'Ø´Ù‡Ø±:',
        saveBtn: 'Ø°Ø®ÛŒØ±Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª',
        locationText: 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª...',
        pleaseEnterLocation: 'Ù„Ø·ÙØ§Ù‹ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯',
        searchCountry: 'Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø´ÙˆØ±...',
        selectCountryFirst: 'Ø§Ø¨ØªØ¯Ø§ Ú©Ø´ÙˆØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...',
        searchCity: 'Ø¬Ø³ØªØ¬ÙˆÛŒ Ø´Ù‡Ø±...',
        loadingCities: 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ù‡Ø±Ù‡Ø§...',
        noCountriesFound: 'Ú©Ø´ÙˆØ±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯',
        noCitiesFound: 'Ø´Ù‡Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯',
        pleaseSelectBoth: 'Ù„Ø·ÙØ§Ù‹ Ú©Ø´ÙˆØ± Ùˆ Ø´Ù‡Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯',
        pleaseSelectValidCountry: 'Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú©Ø´ÙˆØ± Ù…Ø¹ØªØ¨Ø± Ø§Ø² Ù„ÛŒØ³Øª Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯',
        locationNotSet: 'Ù…ÙˆÙ‚Ø¹ÛŒØª ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡',
        fetchingSunset: 'Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨...',
        usingCached: 'Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡',
        sunsetUpdated: 'Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯',
        errorFetching: 'Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨. Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯ØŒ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.',
        usingCachedOutdated: 'Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ (Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù‚Ø¯ÛŒÙ…ÛŒ Ø¨Ø§Ø´Ø¯)',
        unableToLoad: 'Ø§Ù…Ú©Ø§Ù† Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯',
        offline: 'Ø¢ÙÙ„Ø§ÛŒÙ† - Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡',
        estimatedOffline: 'Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨ ØªØ®Ù…ÛŒÙ†ÛŒ (Ø¢ÙÙ„Ø§ÛŒÙ†)',
        settings: 'âš™ï¸',
        aboutTitle: 'Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø³Ø§Ø¹Øª ØºØ±ÙˆØ¨',
        aboutText: '<p>Ø³Ø§Ø¹Øª ØºØ±ÙˆØ¨ ÛŒÚ© Ù†Ù…Ø§ÛŒØ´ Ø²Ù…Ø§Ù† Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ø§Ø³Øª Ú©Ù‡ Ø²Ù…Ø§Ù† Ø³Ù¾Ø±ÛŒ Ø´Ø¯Ù‡ Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† ØºØ±ÙˆØ¨ Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. Ø³Ø§Ø¹Øª Ù‡Ø± Ø±ÙˆØ² Ø¯Ø± Ø²Ù…Ø§Ù† ØºØ±ÙˆØ¨ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ ÛŒÚ© Ú†Ø±Ø®Ù‡ Ø·Ø¨ÛŒØ¹ÛŒ 24 Ø³Ø§Ø¹ØªÙ‡ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p><p>Ú¯Ø±Ø§Ø¯ÛŒØ§Ù† Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø¯Ø± Ø·ÙˆÙ„ Ø±ÙˆØ² ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø²Ù…Ø§Ù† Ø±ÙˆØ² Ø±Ø§ Ù…Ù†Ø¹Ú©Ø³ Ú©Ù†Ø¯ Ùˆ Ø§Ø² Ø¢Ø¨ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÛŒÙ‚ Ø´Ø¨ Ø¨Ù‡ Ø¨Ù†ÙØ´â€ŒÙ‡Ø§ÛŒ ØµØ¨Ø­Ú¯Ø§Ù‡ÛŒ Ùˆ Ù†Ø§Ø±Ù†Ø¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø± ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p><p>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø®ÙˆØ¯ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯ ØªØ§ Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚ ØºØ±ÙˆØ¨ Ø¨Ø±Ø§ÛŒ Ù…Ù†Ø·Ù‚Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯. Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ø¢ÙÙ„Ø§ÛŒÙ† Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø§Ø² Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ ØºØ±ÙˆØ¨ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>'
    }
};

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('sunsetClockLanguage', lang);
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'fa' ? 'rtl' : 'ltr';
    
    const t = window.translations[lang];
    
    // Update all translatable elements
    const elements = {
        'title': t.title,
        'clockLabel': t.clockLabel,
        'countryLabel': t.countryLabel,
        'cityLabel': t.cityLabel,
        'saveBtn': t.saveBtn,
        'languageToggleText': lang === 'en' ? 'ÙØ§' : 'en',
        'aboutTitle': t.aboutTitle,
        'aboutText': t.aboutText
    };
    
    for (const [id, text] of Object.entries(elements)) {
        const element = document.getElementById(id);
        if (element) {
            if (id === 'aboutText') {
                element.innerHTML = text;
            } else {
                element.textContent = text;
            }
        }
    }
    
    // Update placeholders
    const countryInput = document.getElementById('country');
    const cityInput = document.getElementById('city');
    if (countryInput) countryInput.placeholder = t.searchCountry;
    if (cityInput) {
        cityInput.placeholder = window.selectedCountry ? t.searchCity : t.selectCountryFirst;
    }
    
    // Update location info if it exists
    if (typeof window.updateLocationInfo === 'function') {
        window.updateLocationInfo();
    }
}

function toggleLanguage() {
    const newLang = currentLang === 'en' ? 'fa' : 'en';
    setLanguage(newLang);
}

// Make functions available globally
window.setLanguage = setLanguage;
window.toggleLanguage = toggleLanguage;
window.currentLang = currentLang;